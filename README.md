# @ldesign/kit

ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ TypeScript å·¥å…·åŒ…ï¼Œæä¾›äº†æ„å»ºç°ä»£åº”ç”¨ç¨‹åºæ‰€éœ€çš„æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ã€‚

## ğŸš€ ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- **ğŸ› ï¸ å·¥å…·é›†åˆ** - ä¸°å¯Œçš„å®ç”¨å·¥å…·å‡½æ•°
- **ğŸ“ æ–‡ä»¶ç³»ç»Ÿ** - å®Œæ•´çš„æ–‡ä»¶æ“ä½œå’Œç®¡ç†
- **ğŸ’¾ ç¼“å­˜ç³»ç»Ÿ** - å¤šå±‚ç¼“å­˜è§£å†³æ–¹æ¡ˆ
- **âœ… éªŒè¯ç³»ç»Ÿ** - æ•°æ®éªŒè¯å’Œè¡¨å•éªŒè¯
- **ğŸ“¦ å‹ç¼©å½’æ¡£** - æ–‡ä»¶å‹ç¼©å’Œè§£å‹ç¼©
- **ğŸ”§ Git æ“ä½œ** - Git ä»“åº“ç®¡ç†å’Œæ“ä½œ
- **ğŸ“¦ åŒ…ç®¡ç†** - NPM åŒ…ç®¡ç†å’Œä¾èµ–å¤„ç†
- **ğŸ”’ SSL è¯ä¹¦** - SSL è¯ä¹¦ç”Ÿæˆå’Œç®¡ç†
- **ğŸ’» CLI å·¥å…·** - å‘½ä»¤è¡Œç•Œé¢å’Œäº¤äº’å·¥å…·
- **â“ äº¤äº’è¯¢é—®** - ç”¨æˆ·è¾“å…¥å’Œé€‰æ‹©ç•Œé¢
- **ğŸ”” ç³»ç»Ÿé€šçŸ¥** - è·¨å¹³å°ç³»ç»Ÿé€šçŸ¥
- **âš¡ æ€§èƒ½ç›‘æ§** - æ€§èƒ½æµ‹è¯•å’Œç›‘æ§å·¥å…·
- **ğŸ—ï¸ è„šæ‰‹æ¶ç³»ç»Ÿ** - é¡¹ç›®æ¨¡æ¿å’Œè„šæ‰‹æ¶ç®¡ç†
- **ğŸ¨ æ§åˆ¶å° UI** - è¿›åº¦æ¡ã€åŠ è½½åŠ¨ç”»ã€çŠ¶æ€æŒ‡ç¤ºå™¨
- **âš¡ æ„å»ºå·¥å…·** - Vite å’Œ Rollup æ„å»ºå™¨å°è£…

### æ–°å¢åŠŸèƒ½ ğŸ†•
- **ğŸ“ JSON å·¥å…·** - å®‰å…¨è§£æã€æ·±åº¦å…‹éš†ã€å¯¹è±¡æ“ä½œ
- **ğŸ” Base64 å·¥å…·** - ç¼–ç è§£ç ã€URLå®‰å…¨ç¼–ç 
- **ğŸŒ ç¯å¢ƒå˜é‡** - ç±»å‹å®‰å…¨è¯»å–ã€éªŒè¯ã€.envæ”¯æŒ
- **ğŸ—‚ï¸ æ•°æ®ç»“æ„** - Queueã€Stackã€LinkedListã€LRUç¼“å­˜
- **ğŸ§ª æµ‹è¯•å·¥å…·** - Mockã€Spyã€Stubã€æ•°æ®ç”Ÿæˆ
- **ğŸ”’ å®‰å…¨å·¥å…·** - åŠ å¯†ã€å“ˆå¸Œã€Tokenç”Ÿæˆã€å¯†ç å¼ºåº¦
- **âŒ é”™è¯¯å¤„ç†** - ç»Ÿä¸€é”™è¯¯ç³»ç»Ÿã€é”™è¯¯ç ã€é‡è¯•æœºåˆ¶
- **ğŸš€ Promise å·¥å…·** - å¹¶å‘æ§åˆ¶ã€é‡è¯•ã€è¶…æ—¶ã€æ‰¹å¤„ç†
- **ğŸ“ æ­£åˆ™å·¥å…·** - å¸¸ç”¨æ­£åˆ™ã€éªŒè¯ã€æå–ã€æ¨¡ç³ŠåŒ¹é…
- **ğŸ¨ æ ¼å¼åŒ–å·¥å…·** - æ•°å­—ã€è´§å¸ã€æ—¥æœŸã€æ–‡ä»¶å¤§å°æ ¼å¼åŒ–
- **âœ¨ è£…é¥°å™¨å·¥å…·** - ç¼“å­˜ã€é˜²æŠ–ã€èŠ‚æµã€é‡è¯•ç­‰è£…é¥°å™¨

## ğŸ“¦ å®‰è£…

```bash
npm install @ldesign/kit
# æˆ–
yarn add @ldesign/kit
# æˆ–
pnpm add @ldesign/kit
```

## ğŸ¯ å¿«é€Ÿå¼€å§‹

```typescript
import {
  // æ ¸å¿ƒå·¥å…·
  StringUtils,
  FileSystem,
  CacheManager,
  Validator,
  // æ–°å¢å·¥å…·
  JsonUtils,
  Base64Utils,
  EnvUtils,
  ErrorUtils,
  SecurityUtils,
  HashUtils,
  TokenUtils,
  Queue,
  LRUCache,
} from '@ldesign/kit'

// å­—ç¬¦ä¸²å·¥å…·
const slug = StringUtils.slugify('Hello World') // 'hello-world'
const camelCase = StringUtils.camelCase('hello-world') // 'helloWorld'

// æ–‡ä»¶ç³»ç»Ÿæ“ä½œ
await FileSystem.ensureDir('./data')
await FileSystem.writeFile('./data/config.json', JSON.stringify({ app: 'test' }))

// JSON å·¥å…· ğŸ†•
const config = await JsonUtils.parseFile('./config.json')
const merged = JsonUtils.deepMerge(defaultConfig, userConfig)

// ç¯å¢ƒå˜é‡ ğŸ†•
const port = EnvUtils.getNumber('PORT', 3000)
const debug = EnvUtils.getBoolean('DEBUG', false)
await EnvUtils.load('.env')

// ç¼“å­˜ç®¡ç†
const cache = CacheManager.create()
await cache.set('user:123', { name: 'John', age: 30 }, 3600)

// LRU ç¼“å­˜ ğŸ†•
const lruCache = new LRUCache<string, User>(1000)
lruCache.set('user:123', user)

// é”™è¯¯å¤„ç† ğŸ†•
try {
  await riskyOperation()
} catch (error) {
  await ErrorUtils.handle(error)
}

// å®‰å…¨å·¥å…· ğŸ†•
const encrypted = SecurityUtils.encrypt('secret data', 'key')
const hash = await HashUtils.hashPassword('password123')
const token = TokenUtils.generateToken(32)

// Base64 ç¼–ç  ğŸ†•
const encoded = Base64Utils.encode('Hello World')
const tokenData = Base64Utils.encodeObject({ userId: 123 })

// é˜Ÿåˆ— ğŸ†•
const queue = new Queue<Task>()
queue.enqueue(task)
const nextTask = queue.dequeue()

// Promise å·¥å…· ğŸ†•
const results = await PromiseUtils.mapLimit(items, 5, async (item) => {
  return await processItem(item)
})

// æ­£åˆ™éªŒè¯ ğŸ†•
const isValid = RegexUtils.isEmail('user@example.com')
const urls = RegexUtils.extractUrls(text)

// æ ¼å¼åŒ– ğŸ†•
const size = FormatUtils.fileSize(1024 * 1024) // '1.00 MB'
const price = FormatUtils.currency(1234.56, 'USD') // '$1,234.56'

// è£…é¥°å™¨ ğŸ†•
class MyService {
  @memoize({ ttl: 60000 })
  async fetchData(id: number) {
    return await api.get(`/data/${id}`)
  }
}
```

## ğŸ“š æ¨¡å—æ–‡æ¡£

### ğŸ› ï¸ å·¥å…·æ¨¡å— (Utils)

æä¾›å„ç§å®ç”¨å·¥å…·å‡½æ•°ï¼š

```typescript
import { StringUtils, NumberUtils, DateUtils, ObjectUtils, ArrayUtils } from '@ldesign/kit'

// å­—ç¬¦ä¸²å·¥å…·
StringUtils.camelCase('hello-world') // 'helloWorld'
StringUtils.slugify('Hello World!') // 'hello-world'
StringUtils.truncate('å¾ˆé•¿çš„æ–‡æœ¬å†…å®¹', 10) // 'å¾ˆé•¿çš„æ–‡æœ¬å†…å®¹...'
StringUtils.capitalize('hello world') // 'Hello World'

// æ•°å­—å·¥å…·
NumberUtils.formatCurrency(1234.56) // '$1,234.56'
NumberUtils.clamp(15, 0, 10) // 10
NumberUtils.random(1, 100) // éšæœºæ•° 1-100
NumberUtils.round(3.14159, 2) // 3.14

// æ—¥æœŸå·¥å…·
DateUtils.format(new Date(), 'YYYY-MM-DD') // '2024-01-01'
DateUtils.addDays(new Date(), 7) // 7å¤©åçš„æ—¥æœŸ
DateUtils.isWeekend(new Date()) // true/false
DateUtils.diffInDays(date1, date2) // å¤©æ•°å·®

// å¯¹è±¡å·¥å…·
ObjectUtils.deepMerge(obj1, obj2)
ObjectUtils.get(obj, 'user.profile.name')
ObjectUtils.omit(obj, ['password', 'secret'])
ObjectUtils.pick(obj, ['id', 'name', 'email'])

// æ•°ç»„å·¥å…·
ArrayUtils.unique([1, 2, 2, 3]) // [1, 2, 3]
ArrayUtils.chunk([1, 2, 3, 4, 5], 2) // [[1, 2], [3, 4], [5]]
ArrayUtils.groupBy(users, 'role') // æŒ‰è§’è‰²åˆ†ç»„
```

### ğŸ“ æ–‡ä»¶ç³»ç»Ÿæ¨¡å— (FileSystem)

å®Œæ•´çš„æ–‡ä»¶å’Œç›®å½•æ“ä½œï¼š

```typescript
import { FileSystem, FileWatcher } from '@ldesign/kit'

// æ–‡ä»¶æ“ä½œ
await FileSystem.copy('./src', './dist')
await FileSystem.move('./old.txt', './new.txt')
const stats = await FileSystem.stat('./file.txt')
const content = await FileSystem.readFile('./config.json')
await FileSystem.writeFile('./output.txt', 'Hello World')

// ç›®å½•æ“ä½œ
await FileSystem.ensureDir('./data/logs')
const files = await FileSystem.readDir('./src', { recursive: true })
await FileSystem.removeDir('./temp')

// è·¯å¾„æ“ä½œ
const resolved = FileSystem.resolvePath('./relative/path')
const relative = FileSystem.relativePath('/base', '/base/sub/file.txt')

// æƒé™æ£€æŸ¥
const canRead = await FileSystem.canRead('./file.txt')
const canWrite = await FileSystem.canWrite('./file.txt')

// æ–‡ä»¶ç›‘å¬
const watcher = FileWatcher.create('./src')
watcher.on('change', path => {
  console.log(`æ–‡ä»¶å˜æ›´: ${path}`)
})
watcher.on('add', path => {
  console.log(`æ–‡ä»¶æ·»åŠ : ${path}`)
})
```

### ğŸ’¾ ç¼“å­˜æ¨¡å— (Cache)

å¤šå±‚ç¼“å­˜è§£å†³æ–¹æ¡ˆï¼š

```typescript
import { CacheManager, MemoryCache, FileCache } from '@ldesign/kit'

// å†…å­˜ç¼“å­˜
const memoryCache = MemoryCache.create({
  maxSize: 1000,
  ttl: 3600, // é»˜è®¤1å°æ—¶è¿‡æœŸ
})

await memoryCache.set('user:123', { name: 'John', age: 30 })
const user = await memoryCache.get('user:123')

// æ–‡ä»¶ç¼“å­˜
const fileCache = FileCache.create({
  cacheDir: './cache',
  maxSize: 100 * 1024 * 1024, // 100MB
})

// ç¼“å­˜ç®¡ç†å™¨
const cache = CacheManager.create()
cache.addStore('memory', memoryCache)
cache.addStore('file', fileCache)

// ä½¿ç”¨ç¼“å­˜
await cache.set('expensive:data', computedData, 7200) // 2å°æ—¶è¿‡æœŸ
const data = await cache.get('expensive:data')

// ç¼“å­˜ç©¿é€ä¿æŠ¤
const result = await cache.getOrSet(
  'user:profile:123',
  async () => {
    return await fetchUserProfile(123)
  },
  1800
) // 30åˆ†é’Ÿç¼“å­˜

// æ‰¹é‡æ“ä½œ
await cache.setMany({
  key1: 'value1',
  key2: 'value2',
})
const values = await cache.getMany(['key1', 'key2'])
```

### âœ… éªŒè¯æ¨¡å— (Validation)

æ•°æ®éªŒè¯å’Œè¡¨å•éªŒè¯ï¼š

```typescript
import { Validator, ValidationRules, FormValidator } from '@ldesign/kit'

// åŸºç¡€éªŒè¯
const validator = Validator.create()
validator.addRule('email', ValidationRules.email())
validator.addRule(
  'password',
  ValidationRules.password({
    minLength: 8,
    requireUppercase: true,
    requireNumbers: true,
  })
)

const result = await validator.validate({
  email: 'user@example.com',
  password: 'SecurePass123',
})

// è‡ªå®šä¹‰éªŒè¯è§„åˆ™
validator.addRule('username', value => {
  if (value.length < 3) return 'ç”¨æˆ·åè‡³å°‘3ä¸ªå­—ç¬¦'
  if (!/^[a-zA-Z0-9_]+$/.test(value)) return 'ç”¨æˆ·ååªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿'
  return true
})

// è¡¨å•éªŒè¯
const formValidator = FormValidator.create()
formValidator.addFieldRule('email', ValidationRules.required())
formValidator.addFieldRule('email', ValidationRules.email())
formValidator.addFieldRule('confirmPassword', ValidationRules.confirmPassword('password'))

const formResult = await formValidator.validateForm({
  email: 'user@example.com',
  password: 'password123',
  confirmPassword: 'password123',
})
```

### ğŸ”§ Git æ¨¡å— (Git)

Git ä»“åº“ç®¡ç†å’Œæ“ä½œï¼š

```typescript
import { GitManager, GitUtils } from '@ldesign/kit'

// Git ç®¡ç†
const git = new GitManager('./my-project')

// åˆå§‹åŒ–ä»“åº“
await git.init()
await git.setConfig('user.name', 'John Doe')
await git.setConfig('user.email', 'john@example.com')

// åŸºæœ¬æ“ä½œ
await git.add('.')
const commitHash = await git.commit('Initial commit')
await git.push('origin', 'main')

// åˆ†æ”¯æ“ä½œ
await git.createBranch('feature/new-feature')
await git.checkout('feature/new-feature')
await git.merge('main')

// çŠ¶æ€æŸ¥è¯¢
const status = await git.status()
console.log('æœªè·Ÿè¸ªæ–‡ä»¶:', status.untracked)
console.log('å·²ä¿®æ”¹æ–‡ä»¶:', status.unstaged)

// æäº¤å†å²
const commits = await git.log({ limit: 10 })
commits.forEach(commit => {
  console.log(`${commit.hash}: ${commit.message}`)
})

// è¿œç¨‹ä»“åº“
await git.addRemote('origin', 'https://github.com/user/repo.git')
const remotes = await git.remotes()

// å·¥å…·å‡½æ•°
const isRepo = await GitUtils.isRepository('./project')
const root = await GitUtils.findRepositoryRoot('./project/sub/dir')
```

### ğŸ“¦ åŒ…ç®¡ç†æ¨¡å— (Package)

NPM åŒ…ç®¡ç†å’Œä¾èµ–å¤„ç†ï¼š

```typescript
import { PackageManager, PackageUtils } from '@ldesign/kit'

// åŒ…ç®¡ç†
const packageManager = new PackageManager('./my-project')

// è¯»å–å’Œæ›´æ–° package.json
const pkg = await packageManager.readPackageJson()
await packageManager.updatePackageJson({
  version: '1.1.0',
  description: 'æ›´æ–°çš„æè¿°',
})

// ä¾èµ–ç®¡ç†
await packageManager.addDependency('lodash', '^4.17.21')
await packageManager.addDependency('typescript', '^5.0.0', { dev: true })
await packageManager.removeDependency('old-package')

// è„šæœ¬ç®¡ç†
await packageManager.addScript('dev', 'vite')
await packageManager.runScript('build')
const scripts = await packageManager.getScripts()

// ç‰ˆæœ¬ç®¡ç†
await packageManager.bumpVersion('patch') // 1.0.0 -> 1.0.1
await packageManager.updateVersion('2.0.0')

// åŒ…å®‰è£…
await packageManager.install()
await packageManager.installPackage('express')
await packageManager.uninstallPackage('unused-package')

// å·¥å…·å‡½æ•°
const parsed = PackageUtils.parsePackageName('@types/node@18.0.0')
const isValid = PackageUtils.isValidVersion('1.0.0')
const comparison = PackageUtils.compareVersions('1.0.0', '1.1.0')
```

### ğŸ”’ SSL æ¨¡å— (SSL)

SSL è¯ä¹¦ç”Ÿæˆå’Œç®¡ç†ï¼š

```typescript
import { SSLManager, SSLUtils } from '@ldesign/kit'

// SSL ç®¡ç†
const sslManager = new SSLManager({
  keySize: 2048,
  validityDays: 365,
})

// ç”Ÿæˆå¯†é’¥å¯¹
const keyPair = await sslManager.generateKeyPair()

// ç”Ÿæˆè‡ªç­¾åè¯ä¹¦
const certificate = await sslManager.generateSelfSignedCertificate(keyPair, {
  subject: {
    commonName: 'localhost',
    organization: 'My Company',
    country: 'US',
  },
})

// éªŒè¯è¯ä¹¦
const validation = await sslManager.verifyCertificate(certificate)
console.log('è¯ä¹¦æœ‰æ•ˆ:', validation.valid)

// å¿«é€Ÿç”Ÿæˆè¯ä¹¦
const quickCert = await SSLUtils.generateQuickCertificate({
  commonName: 'example.com',
  organization: 'Example Corp',
})

// è¯ä¹¦åˆ†æ
const strength = SSLUtils.analyzeCertificateStrength(certificate)
console.log('å®‰å…¨è¯„åˆ†:', strength.score)

// åŸŸåéªŒè¯
const matches = SSLUtils.validateDomainMatch(certificate, 'localhost')
console.log('åŸŸååŒ¹é…:', matches)
```

### ğŸ’» CLI æ¨¡å— (CLI)

å‘½ä»¤è¡Œç•Œé¢å’Œäº¤äº’å·¥å…·ï¼š

```typescript
import { CLIManager, OutputFormatter, ProgressBar, Table } from '@ldesign/kit'

// CLI ç®¡ç†
const cli = new CLIManager({
  name: 'my-app',
  version: '1.0.0',
  description: 'æˆ‘çš„å‘½ä»¤è¡Œåº”ç”¨',
})

// æ·»åŠ å‘½ä»¤
cli.addCommand('build', {
  description: 'æ„å»ºé¡¹ç›®',
  options: [
    { name: 'env', description: 'ç¯å¢ƒ', type: 'string', default: 'production' },
    { name: 'watch', description: 'ç›‘å¬æ¨¡å¼', type: 'boolean' },
  ],
  action: async options => {
    console.log(`æ„å»ºç¯å¢ƒ: ${options.env}`)
    if (options.watch) {
      console.log('å¯ç”¨ç›‘å¬æ¨¡å¼')
    }
  },
})

// è¾“å‡ºæ ¼å¼åŒ–
const formatter = OutputFormatter.create({ colors: true })
formatter.success('æ“ä½œæˆåŠŸå®Œæˆ!')
formatter.error('å‘ç”Ÿé”™è¯¯:', error.message)
formatter.warning('è­¦å‘Šä¿¡æ¯')
formatter.info('æç¤ºä¿¡æ¯')

// è¿›åº¦æ¡
const progress = ProgressBar.create({
  total: 100,
  format: 'è¿›åº¦ [{bar}] {percentage}% | {value}/{total}',
})

for (let i = 0; i <= 100; i++) {
  progress.update(i)
  await new Promise(resolve => setTimeout(resolve, 50))
}

// è¡¨æ ¼æ˜¾ç¤º
const table = Table.create({
  head: ['ID', 'åç§°', 'çŠ¶æ€', 'åˆ›å»ºæ—¶é—´'],
  colWidths: [10, 20, 10, 20],
})

table.push(['1', 'John Doe', 'æ´»è·ƒ', '2024-01-01'])
table.push(['2', 'Jane Smith', 'ç¦ç”¨', '2024-01-02'])
console.log(table.toString())
```

### â“ äº¤äº’è¯¢é—®æ¨¡å— (Inquirer)

ç”¨æˆ·è¾“å…¥å’Œé€‰æ‹©ç•Œé¢ï¼š

```typescript
import { InquirerManager, InquirerUtils } from '@ldesign/kit'

// äº¤äº’ç®¡ç†å™¨
const inquirer = InquirerManager.create()

// æ–‡æœ¬è¾“å…¥
const name = await inquirer.input({
  message: 'è¯·è¾“å…¥æ‚¨çš„å§“å:',
  validate: input => (input.length > 0 ? true : 'å§“åä¸èƒ½ä¸ºç©º'),
})

// å¯†ç è¾“å…¥
const password = await inquirer.password({
  message: 'è¯·è¾“å…¥å¯†ç :',
  mask: '*',
})

// ç¡®è®¤è¯¢é—®
const confirmed = await inquirer.confirm({
  message: 'ç¡®å®šè¦ç»§ç»­å—?',
  default: true,
})

// å•é€‰åˆ—è¡¨
const framework = await inquirer.select({
  message: 'é€‰æ‹©å‰ç«¯æ¡†æ¶:',
  choices: [
    { name: 'React', value: 'react' },
    { name: 'Vue', value: 'vue' },
    { name: 'Angular', value: 'angular' },
  ],
})

// å¤šé€‰åˆ—è¡¨
const features = await inquirer.multiSelect({
  message: 'é€‰æ‹©éœ€è¦çš„åŠŸèƒ½:',
  choices: [
    { name: 'TypeScript', value: 'typescript' },
    { name: 'ESLint', value: 'eslint' },
    { name: 'Prettier', value: 'prettier' },
  ],
})

// å¿«é€Ÿå·¥å…·å‡½æ•°
const email = await InquirerUtils.input('è¯·è¾“å…¥é‚®ç®±:')
const choice = await InquirerUtils.select('é€‰æ‹©æ“ä½œ:', ['åˆ›å»º', 'æ›´æ–°', 'åˆ é™¤'])
```

### ğŸ”” ç³»ç»Ÿé€šçŸ¥æ¨¡å— (Notification)

è·¨å¹³å°ç³»ç»Ÿé€šçŸ¥ï¼š

```typescript
import { NotificationManager, NotificationUtils } from '@ldesign/kit'

// é€šçŸ¥ç®¡ç†å™¨
const notificationManager = NotificationManager.create({
  appName: 'My App',
  sound: true,
})

// å‘é€é€šçŸ¥
await notificationManager.notify({
  title: 'ä»»åŠ¡å®Œæˆ',
  message: 'æ‰€æœ‰æ–‡ä»¶å·²æˆåŠŸå¤„ç†',
  type: 'success',
})

// å¿«é€Ÿé€šçŸ¥
await notificationManager.success('æ“ä½œæˆåŠŸ', 'æ•°æ®å·²ä¿å­˜')
await notificationManager.error('æ“ä½œå¤±è´¥', 'ç½‘ç»œè¿æ¥é”™è¯¯')
await notificationManager.warning('æ³¨æ„', 'ç£ç›˜ç©ºé—´ä¸è¶³')
await notificationManager.info('æç¤º', 'æœ‰æ–°ç‰ˆæœ¬å¯ç”¨')

// é€šçŸ¥å†å²
const history = notificationManager.getHistory(10)
const unreadCount = notificationManager.getUnreadCount()

// å¿«é€Ÿå·¥å…·å‡½æ•°
await NotificationUtils.success('æ„å»ºå®Œæˆ', 'é¡¹ç›®æ„å»ºæˆåŠŸ')
await NotificationUtils.error('æ„å»ºå¤±è´¥', 'ç¼–è¯‘é”™è¯¯')

// æ£€æŸ¥é€šçŸ¥æƒé™
const permission = await notificationManager.checkPermission()
if (permission !== 'granted') {
  await notificationManager.requestPermission()
}

// æ‰¹é‡é€šçŸ¥
await NotificationUtils.notifyBatch([
  { title: 'ä»»åŠ¡1', message: 'å·²å®Œæˆ' },
  { title: 'ä»»åŠ¡2', message: 'å·²å®Œæˆ' },
  { title: 'ä»»åŠ¡3', message: 'å·²å®Œæˆ' },
])
```

### âš¡ æ€§èƒ½ç›‘æ§æ¨¡å— (Performance)

æ€§èƒ½æµ‹è¯•å’Œç›‘æ§å·¥å…·ï¼š

```typescript
import { PerformanceMonitor, PerformanceUtils } from '@ldesign/kit'

// æ€§èƒ½ç›‘æ§å™¨
const monitor = PerformanceMonitor.create({
  maxMetrics: 1000,
  enableMemory: true,
  enableCPU: true,
})

// è®¡æ—¶å™¨
monitor.startTimer('database-query')
const users = await fetchUsers()
const duration = monitor.endTimer('database-query')
console.log(`æŸ¥è¯¢è€—æ—¶: ${duration}ms`)

// å‡½æ•°æ€§èƒ½æµ‹é‡
const { result, duration: funcDuration } = await monitor.measureFunction('expensive-calc', () => {
  return performExpensiveCalculation()
})

// åŸºå‡†æµ‹è¯•
const benchmark = await monitor.benchmark(
  'array-sort',
  () => {
    const arr = Array.from({ length: 10000 }, () => Math.random())
    return arr.sort()
  },
  { iterations: 100 }
)

console.log(`å¹³å‡è€—æ—¶: ${benchmark.averageTime}ms`)
console.log(`æ¯ç§’æ“ä½œæ•°: ${benchmark.opsPerSecond}`)

// å†…å­˜ç›‘æ§
const memorySnapshot = monitor.getMemorySnapshot()
console.log(`å †å†…å­˜ä½¿ç”¨: ${memorySnapshot.heapUsed / 1024 / 1024}MB`)

// å¿«é€Ÿå·¥å…·å‡½æ•°
const quickResult = PerformanceUtils.time('quick-test', () => {
  return someOperation()
})

// å†…å­˜åˆ†æ
const memoryAnalysis = PerformanceUtils.analyzeMemoryUsage()
console.log(`å†…å­˜ä½¿ç”¨: ${memoryAnalysis.formatted.heapUsed}`)

// å‡½æ•°æ€§èƒ½æ¯”è¾ƒ
const comparison = await PerformanceUtils.compareFunctions(
  [
    { name: 'method1', fn: method1 },
    { name: 'method2', fn: method2 },
  ],
  1000
)

comparison.forEach((result, index) => {
  console.log(`æ’å ${result.rank}: ${result.name} - ${result.averageTime}ms`)
})
```

### ğŸ—ï¸ è„šæ‰‹æ¶ç³»ç»Ÿ

```typescript
import { ScaffoldManager, CliBuilder } from '@ldesign/kit'

// åˆ›å»ºè„šæ‰‹æ¶ç®¡ç†å™¨
const scaffold = new ScaffoldManager({
  name: 'my-cli',
  version: '1.0.0',
  description: 'æˆ‘çš„é¡¹ç›®è„šæ‰‹æ¶',
  environments: ['development', 'production', 'staging'],
  defaultEnvironment: 'development',
})

// åˆå§‹åŒ–è„šæ‰‹æ¶
await scaffold.initialize()

// åˆ›å»ºé¡¹ç›®
const result = await scaffold.createProject({
  name: 'my-project',
  template: 'vue-app',
  environment: 'development',
  interactive: true,
})

// åˆ›å»º CLI å·¥å…·
const cli = new CliBuilder({
  name: 'my-cli',
  version: '1.0.0',
  description: 'æˆ‘çš„ CLI å·¥å…·',
  scaffoldManager: scaffold,
})

// è§£æå‘½ä»¤è¡Œå‚æ•°
cli.parse()
```

### ğŸ¨ æ§åˆ¶å° UI ç»„ä»¶

```typescript
import {
  ProgressBar,
  LoadingSpinner,
  StatusIndicator,
  MultiProgress,
  ConsoleTheme,
} from '@ldesign/kit'

// è¿›åº¦æ¡
const progressBar = ProgressBar.createDetailed(100)
progressBar.start()
for (let i = 0; i <= 100; i += 10) {
  progressBar.update(i)
  await new Promise(resolve => setTimeout(resolve, 100))
}
progressBar.complete()

// åŠ è½½åŠ¨ç”»
const spinner = LoadingSpinner.createDots('åŠ è½½ä¸­...')
spinner.start()
await someAsyncOperation()
spinner.succeed('åŠ è½½å®Œæˆ')

// çŠ¶æ€æŒ‡ç¤ºå™¨
const status = StatusIndicator.create()
status.success('æ“ä½œæˆåŠŸ')
status.error('æ“ä½œå¤±è´¥')
status.warning('è­¦å‘Šä¿¡æ¯')
status.info('æç¤ºä¿¡æ¯')

// å¤šä»»åŠ¡è¿›åº¦
const multiProgress = MultiProgress.create()
multiProgress.start()
multiProgress.addTask({ id: 'task1', name: 'ä»»åŠ¡1', total: 100 })
multiProgress.addTask({ id: 'task2', name: 'ä»»åŠ¡2', total: 50 })

// ä¸»é¢˜ç³»ç»Ÿ
const theme = ConsoleTheme.create('colorful')
console.log(theme.success('æˆåŠŸæ¶ˆæ¯'))
console.log(theme.error('é”™è¯¯æ¶ˆæ¯'))
```

### âš¡ æ„å»ºå·¥å…·æ¨¡å— (Builder)

å¼ºå¤§çš„ Vite å’Œ Rollup æ„å»ºå™¨å°è£…ï¼š

```typescript
import {
  ViteBuilder,
  RollupBuilder,
  BuilderFactory,
  createViteBuilder,
  createRollupBuilder,
  createViteBuilderWithPreset,
  createRollupBuilderWithPreset,
} from '@ldesign/kit'

// Vite æ„å»ºå™¨
const viteBuilder = new ViteBuilder({
  entry: 'src/index.ts',
  outDir: 'dist',
  server: {
    port: 3000,
    open: true,
  },
})

// æ„å»ºé¡¹ç›®
const buildResult = await viteBuilder.build()
console.log('æ„å»ºç»“æœ:', buildResult)

// å¯åŠ¨å¼€å‘æœåŠ¡å™¨
const devServer = await viteBuilder.dev()
console.log(`å¼€å‘æœåŠ¡å™¨: ${devServer.url}`)

// æ„å»ºåº“
const libBuilder = new ViteBuilder({
  lib: {
    entry: 'src/index.ts',
    name: 'MyLibrary',
    formats: ['es', 'cjs', 'umd'],
  },
})
await libBuilder.buildLib()

// Rollup æ„å»ºå™¨
const rollupBuilder = new RollupBuilder({
  input: 'src/index.ts',
  output: [
    { file: 'dist/index.js', format: 'es' },
    { file: 'dist/index.cjs', format: 'cjs' },
    { file: 'dist/index.umd.js', format: 'umd', name: 'MyLib' },
  ],
})

// æ„å»ºå¤šç§æ ¼å¼
const results = await rollupBuilder.buildMultiple(['es', 'cjs', 'umd'])
results.forEach((result, index) => {
  console.log(`æ ¼å¼ ${['es', 'cjs', 'umd'][index]}: ${result.success ? 'æˆåŠŸ' : 'å¤±è´¥'}`)
})

// ä½¿ç”¨é¢„è®¾åˆ›å»ºæ„å»ºå™¨
const vueBuilder = createViteBuilderWithPreset('vue-app', {
  server: { port: 8080 },
})

const libBuilder2 = createRollupBuilderWithPreset('rollup-library', {
  input: 'src/my-lib.ts',
})

// å·¥å‚æ–¹æ³•
const builder1 = BuilderFactory.createViteBuilder({
  entry: 'src/app.ts',
})

const builder2 = BuilderFactory.createRollupBuilder({
  input: 'src/lib.ts',
  output: { file: 'dist/lib.js', format: 'es' },
})

// ç›‘å¬æ„å»ºäº‹ä»¶
viteBuilder.on('build:start', ({ mode }) => {
  console.log(`å¼€å§‹æ„å»º (${mode})`)
})

viteBuilder.on('build:end', ({ result }) => {
  console.log(`æ„å»ºå®Œæˆ: ${result.success ? 'æˆåŠŸ' : 'å¤±è´¥'}`)
})

// ç›‘å¬æ¨¡å¼
await viteBuilder.watch() // Vite ç›‘å¬æ¨¡å¼
await rollupBuilder.watch() // Rollup ç›‘å¬æ¨¡å¼

// æ¸…ç†èµ„æº
await viteBuilder.destroy()
await rollupBuilder.destroy()
```

#### å†…ç½®é¢„è®¾

```typescript
// Vue åº”ç”¨é¢„è®¾
const vueApp = createViteBuilderWithPreset('vue-app')

// React åº”ç”¨é¢„è®¾
const reactApp = createViteBuilderWithPreset('react-app')

// åº“å¼€å‘é¢„è®¾
const library = createViteBuilderWithPreset('library')

// TypeScript åº“é¢„è®¾
const tsLibrary = createViteBuilderWithPreset('ts-library')

// Node.js åº”ç”¨é¢„è®¾
const nodeApp = createViteBuilderWithPreset('node-app')

// Rollup åº“é¢„è®¾
const rollupLib = createRollupBuilderWithPreset('rollup-library')

// UMD åº“é¢„è®¾
const umdLib = createRollupBuilderWithPreset('umd-library')
```

#### æ„å»ºå·¥å…·å‡½æ•°

```typescript
import { BuilderUtils } from '@ldesign/kit'

// æ£€æµ‹é¡¹ç›®ç±»å‹
const projectType = BuilderUtils.detectProjectType('./my-project')
console.log('é¡¹ç›®ç±»å‹:', projectType) // 'vue', 'react', 'library', etc.

// æŸ¥æ‰¾å…¥å£æ–‡ä»¶
const entryFile = BuilderUtils.findEntryFile('./my-project')
console.log('å…¥å£æ–‡ä»¶:', entryFile)

// æŸ¥æ‰¾å¤šä¸ªå…¥å£æ–‡ä»¶
const entries = BuilderUtils.findMultipleEntries('./my-project', 'src/*/index.ts')
console.log('å¤šå…¥å£:', entries)

// ç”Ÿæˆæ–‡ä»¶å
const fileName = BuilderUtils.generateFileName('es', 'index', { minify: true })
console.log('æ–‡ä»¶å:', fileName) // 'index.min.js'

// æ ¼å¼åŒ–æ„å»ºç»“æœ
const formatted = BuilderUtils.formatBuildResult(buildResult)
console.log(formatted)

// æ ¼å¼åŒ–æ–‡ä»¶å¤§å°
const size = BuilderUtils.formatFileSize(1024 * 1024)
console.log('æ–‡ä»¶å¤§å°:', size) // '1 MB'

// æ£€æŸ¥ä¾èµ–
const depCheck = BuilderUtils.checkDependencies('./my-project', ['react', 'vue'])
console.log('å·²å®‰è£…:', depCheck.installed)
console.log('ç¼ºå¤±:', depCheck.missing)

// è·å–æ¨èé…ç½®
const recommendedConfig = BuilderUtils.getRecommendedConfig('./my-project')
console.log('æ¨èé…ç½®:', recommendedConfig)

// éªŒè¯é…ç½®
const validation = BuilderUtils.validateConfig(config)
console.log('é…ç½®æœ‰æ•ˆ:', validation.valid)
if (!validation.valid) {
  console.log('é”™è¯¯:', validation.errors)
}
```

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# è¿è¡Œç‰¹å®šæ¨¡å—æµ‹è¯•
npm test -- --testPathPattern=utils

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage

# ç›‘å¬æ¨¡å¼è¿è¡Œæµ‹è¯•
npm run test:watch
```

## ğŸ“– API æ–‡æ¡£

è¯¦ç»†çš„ API æ–‡æ¡£è¯·æŸ¥çœ‹å„æ¨¡å—çš„ TypeScript ç±»å‹å®šä¹‰å’Œ JSDoc æ³¨é‡Šã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·æŸ¥çœ‹ [CONTRIBUTING.md](../../CONTRIBUTING.md) äº†è§£è¯¦ç»†ä¿¡æ¯ã€‚

## ğŸ“„ è®¸å¯è¯

MIT License - æŸ¥çœ‹ [LICENSE](../../LICENSE) æ–‡ä»¶äº†è§£è¯¦ç»†ä¿¡æ¯ã€‚

## ğŸ”— ç›¸å…³é“¾æ¥

- [GitHub ä»“åº“](https://github.com/ldesign/ldesign)
- [é—®é¢˜åé¦ˆ](https://github.com/ldesign/ldesign/issues)
- [æ›´æ–°æ—¥å¿—](./CHANGELOG.md)
- [æ–°åŠŸèƒ½æŒ‡å—](./docs/NEW_FEATURES.md) ğŸ†•
- [æ‰©å±•åŠŸèƒ½æŒ‡å—](./docs/ADDITIONAL_FEATURES.md) ğŸ†•
- [ä¼˜åŒ–æ€»ç»“](./docs/OPTIMIZATION_SUMMARY.md)
- [ä½¿ç”¨ç¤ºä¾‹](./examples/)

## âš¡ æ–°åŠŸèƒ½äº®ç‚¹

### ç¬¬ä¸€æ‰¹åŠŸèƒ½
æŸ¥çœ‹ [æ–°åŠŸèƒ½æŒ‡å—](./docs/NEW_FEATURES.md) äº†è§£è¯¦ç»†ä¿¡æ¯ï¼š

- **JSON å·¥å…·** - å®‰å…¨çš„ JSON è§£æã€æ·±åº¦å…‹éš†ã€å¯¹è±¡æ“ä½œ
- **Base64 å·¥å…·** - å®Œæ•´çš„ Base64 ç¼–ç è§£ç ï¼Œæ”¯æŒ URL å®‰å…¨æ ¼å¼
- **ç¯å¢ƒå˜é‡å·¥å…·** - ç±»å‹å®‰å…¨çš„ç¯å¢ƒå˜é‡è¯»å–å’ŒéªŒè¯
- **æ•°æ®ç»“æ„** - Queueã€Stackã€LinkedListã€LRU ç¼“å­˜
- **æµ‹è¯•å·¥å…·** - Mockã€Spyã€Stub å’Œæµ‹è¯•æ•°æ®ç”Ÿæˆ
- **å®‰å…¨å·¥å…·** - åŠ å¯†ã€å“ˆå¸Œã€Token ç”Ÿæˆã€å¯†ç å¼ºåº¦éªŒè¯
- **é”™è¯¯å¤„ç†** - ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶å’Œé”™è¯¯ç ç³»ç»Ÿ

### ç¬¬äºŒæ‰¹åŠŸèƒ½
æŸ¥çœ‹ [æ‰©å±•åŠŸèƒ½æŒ‡å—](./docs/ADDITIONAL_FEATURES.md) äº†è§£è¯¦ç»†ä¿¡æ¯ï¼š

- **Promise å·¥å…·** - å¹¶å‘æ§åˆ¶ã€é‡è¯•ã€è¶…æ—¶ã€æ‰¹å¤„ç†ã€é˜Ÿåˆ—ã€é™æµ
- **æ­£åˆ™å·¥å…·** - 60+ é¢„å®šä¹‰æ­£åˆ™ã€éªŒè¯ã€æå–ã€é«˜äº®ã€æ¨¡ç³ŠåŒ¹é…
- **æ ¼å¼åŒ–å·¥å…·** - æ–‡ä»¶å¤§å°ã€è´§å¸ã€æ—¥æœŸã€ç”µè¯ã€åœ°å€ç­‰æ ¼å¼åŒ–
- **è£…é¥°å™¨å·¥å…·** - ç¼“å­˜ã€é˜²æŠ–ã€èŠ‚æµã€é‡è¯•ã€æ—¥å¿—ã€æ€§èƒ½ç›‘æ§ç­‰è£…é¥°å™¨
